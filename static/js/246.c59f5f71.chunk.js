"use strict";(self.webpackChunkspirify=self.webpackChunkspirify||[]).push([[246],{99458:function(e,n,t){t.r(n),t.d(n,{default:function(){return E}});var i=t(29439),a=t(72791),r=t(80177),l=t(93433),o=t(13534),s=t.n(o),c=t(9323),d=t.n(c),p=t(61293),u=t.n(p),v=t(15125),h=(t(6639),t(27862),t(66106)),m=t(30914),f=t(81747);function g(e){var n=f.ZP.load("");return e.forEach((function(e){if("name"in e){var t=n("<".concat(e.name,">"));for(var i in e.attribs)t.attr(i,e.attribs[i]);e.children&&t.append(g(e.children)),n.root().append(t)}else"data"in e&&n.root().append(e.data)})),n.html()}var b=t(1413),x=t(21765),y=t(30298),z=t.n(y),k=t(26769),S=t.n(k);function _(e){var n=function(e){var n,t={};return null!==(n=e.attribs)&&void 0!==n&&n.style&&(t=e.attribs.style.split(";").reduce((function(e,n){var t=n.split(":").map((function(e){return e.trim()})),a=(0,i.Z)(t,2),r=a[0],l=a[1];return r&&(e[r]=l),e}),{})),t}(e);n["list-style-type"]="none",n["padding-left"]="0",e.attribs||(e.attribs={}),e.attribs.style=function(e){return Object.entries(e).map((function(e){var n=(0,i.Z)(e,2),t=n[0],a=n[1];return"".concat(t,": ").concat(a)})).join("; ")}(n)}function j(e,n,t){var i,a,r,l,o,s,c=(null===(i=e.attribs)||void 0===i?void 0:i.icon)||n.icon||t.icon,d=(null===(a=e.attribs)||void 0===a?void 0:a.size)||n.iconSize||t.iconSize,p=(null===(r=e.attribs)||void 0===r?void 0:r.class)||n.className||t.className;null!==(l=e.attribs)&&void 0!==l&&l.icon&&delete e.attribs.icon,null!==(o=e.attribs)&&void 0!==o&&o.size&&delete e.attribs.size,null!==(s=e.attribs)&&void 0!==s&&s.class&&delete e.attribs.class;var u,v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"25px";z()(e)?e="".concat(e,"px"):S()(e)&&/^\d+px$/.test(e)||(e="25px");var n=16+.64*(Number(e.slice(0,-2))-25);return n=Math.max(n,16),{fontSize:"".concat(n,"px"),imageSize:e,squareSize:e}}(d),h=function(e,n,t,i){var a=new x.EmojiConvertor;a.replace_mode="unified",a.allow_native=!0;var r,l=":".concat(n,":"),o=a.replace_colons(l),s=o!==l,c=!s&&(/^(\.\/)?[a-zA-Z0-9\-._~:/?#[\]@!$&'()*+,;=%]+\.(jpg|png|gif|bmp|svg|jpeg)$/.test(n)||/^(http(s)?|ftp):\/\/[^\s/$.?#].[^\s]*$/.test(n)),d="width: ".concat(t.squareSize,"; height: ").concat(t.squareSize,"; \n          margin-right:5px;text-align:center;display:flex;align-items:center;");if(s)r={type:"tag",name:"span",attribs:(0,b.Z)((0,b.Z)({},i&&{class:i}),{},{"aria-hidden":"true",style:"".concat(d).concat(t.fontSize?"font-size:".concat(t.fontSize,";\n        margin-right: 5px;"):"margin-right: 5px;")}),children:[{type:"text",data:o}],next:void 0,prev:void 0,parent:e};else if(c){var p,u,v=(null===(p=n.split("/").pop())||void 0===p?void 0:p.split(".")[0])||"",h={type:"tag",name:"div",attribs:{style:"padding: 0.2rem;"},children:[],next:void 0,prev:void 0,parent:e},m={type:"tag",name:"img",attribs:(0,b.Z)((0,b.Z)({},i&&{class:i}),{},{src:n,alt:v,style:d}),children:[],next:void 0,prev:void 0,parent:h};null===(u=h.children)||void 0===u||u.push(m),r=h}else r={type:"tag",name:"i",attribs:{class:i?"".concat(n," ").concat(i):n,"aria-hidden":"true",style:"".concat(d,"margin-right:5px;").concat(t.fontSize?"font-size:".concat(t.fontSize,";"):"")},children:[],next:void 0,prev:void 0,parent:e};return r}(e,c,v,p),m=(u=e,{type:"tag",name:"div",attribs:{},children:e.children||[],next:void 0,prev:void 0,parent:u});e.children=[h,m],function(e,n,t){e.next=n,n.prev=e,t.forEach((function(e){e.parent=n}))}(h,m,e.children||[]),e.attribs||(e.attribs={}),e.attribs.style="display: flex;"}var Z=t(80184),w=new(s());w.use(d()),w.core.ruler.push("modify_tokens",(function(e){var n=[],t=[];e.tokens.forEach((function(e,i){if("bullet_list_open"===e.type)n.push({index:i,map:(0,l.Z)(e.map),token:e,pTag:!1,atIndex:-1});else if("bullet_list_close"===e.type){var a=n.pop();null!=a&&(null!==a.token.attrs?(a.map[0]=a.map[0]+1,n.length>0?n[n.length-1].map[0]=a.map[0]+1:a.map[0]=a.map[0]+1):n.length>0&&(n[n.length-1].map[0]=a.map[0]),t.push(a))}else"inline"===e.type&&n.length>0&&(n[n.length-1].map[0]>=e.map[0]||(n[n.length-1].pTag=!0,n[n.length-1].atIndex=i),n[n.length-1].map[0]=e.map[1])}));var i=[];e.tokens.forEach((function(e,n){if("paragraph_open"===e.type||"paragraph_close"===e.type){var a=t.find((function(n){return n.token.level===e.level-2}));a?a.pTag&&i.push(e):i.push(e)}else i.push(e)})),e.tokens=i}));var T=function(e){var n,t=e.markdown,i=w.render(t),a=(n=i,f.ZP.parseHTML(n));console.log(a),null===a?console.log("parseHTML(renderedMarkdown) returned null"):a.forEach((function(e){"ul"==e.name&&(console.log("ul node",e),function(e){var n,t,i=null===(n=e.attribs)||void 0===n?void 0:n.icon,a=null===(t=e.children)||void 0===t?void 0:t.find((function(e){var n;return"li"===e.name&&(null===(n=e.attribs)||void 0===n?void 0:n.icon)}));if(void 0===i&&void 0===a)return e;if("name"in e&&"ul"===e.name){var r,l,o,s,c,d={icon:i,iconSize:null===(r=e.attribs)||void 0===r?void 0:r.size,className:null===(l=e.attribs)||void 0===l?void 0:l.class};d.icon&&(null===(o=e.attribs)||void 0===o||delete o.icon),d.iconSize&&(null===(s=e.attribs)||void 0===s||delete s.size),d.className&&(null===(c=e.attribs)||void 0===c||delete c.class);var p,u,v,h,m={};a&&(m={icon:null===(p=a.attribs)||void 0===p?void 0:p.icon,iconSize:null===(u=a.attribs)||void 0===u?void 0:u.size,className:null===(v=a.attribs)||void 0===v?void 0:v.class}),(d.icon||a)&&(_(e),e.children=(null===(h=e.children)||void 0===h?void 0:h.map((function(e){return"li"===e.name&&j(e,d,m),e})))||[])}}(e)),i=g(a)}));var r=(0,v.html)(i,{indent_size:2}),l=u().highlight(r,u().languages.markup,"markup");return(0,Z.jsx)("div",{children:(0,Z.jsxs)(h.Z,{gutter:[16,16],children:[(0,Z.jsx)(m.Z,{span:12,children:(0,Z.jsx)("div",{dangerouslySetInnerHTML:{__html:i}})}),(0,Z.jsx)(m.Z,{span:12,children:(0,Z.jsx)("pre",{className:"language-markup",children:(0,Z.jsx)("code",{dangerouslySetInnerHTML:{__html:l}})})})]})})},N=r.Z.TextArea,E=function(){var e=(0,a.useState)('\n- item 1\n- item 2 {icon="https://spirify.azurewebsites.net/icon-512.png"}\n'),n=(0,i.Z)(e,2),t=n[0],r=n[1];return(0,Z.jsxs)("div",{children:[(0,Z.jsx)(N,{value:t,onChange:function(e){return r(e.target.value)},placeholder:"Write some markdown here...",rows:4}),(0,Z.jsx)(T,{markdown:t})]})}}}]);
//# sourceMappingURL=246.c59f5f71.chunk.js.map