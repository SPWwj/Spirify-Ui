"use strict";(self.webpackChunkspirify=self.webpackChunkspirify||[]).push([[207],{207:function(e,r,t){t.r(r),t.d(r,{default:function(){return x}});var n=t(4165),a=t(5861),i=t(9439),s=t(2791),c=t(7027),o=t(3655),u=t(4996),l=t(7174),h=t(2339),p=t(9004),f={sharingDetail:"SharingDetailPage_sharingDetail__JyeZu",button:"SharingDetailPage_button__C4uEL",buttonContainer:"SharingDetailPage_buttonContainer__a+S+I",descriptions:"SharingDetailPage_descriptions__ZIVDD",image:"SharingDetailPage_image__8IENH",imageContainer:"SharingDetailPage_imageContainer__TwAqu"},d=t(9228),Z=t(7689),m=t(5798),v=t(8788),g=t(184),x=function(){var e=(0,s.useState)(null),r=(0,i.Z)(e,2),t=r[0],x=r[1],b=(0,Z.UO)().id,w=(0,s.useContext)(v.V).username,I=(0,Z.s0)(),y=(0,s.useCallback)((0,a.Z)((0,n.Z)().mark((function e(){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.getSharingItem(b);case 3:r=e.sent,x(r),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),c.ZP.error("error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[b]);(0,s.useEffect)((function(){y()}),[y]);var k=(0,d.e)((null===t||void 0===t?void 0:t.image)||""),j=k.src,S=k.style,P=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.deleteSharingItem(b);case 3:c.ZP.success("Sharing item deleted successfully!"),setTimeout((function(){I("/dashboard")}),1e3),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c.ZP.error("Failed to delete sharing item!"),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.borrowItem(b);case 3:c.ZP.success("Borrowed successfully!"),y(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c.ZP.error("Failed to borrow the sharing item!"),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.returnItem(b);case 3:c.ZP.success("Returned successfully!"),y(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c.ZP.error("Failed to return the sharing item!"),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return t?(0,g.jsxs)("div",{className:f.sharingDetail,children:[(0,g.jsx)(o.Z.Title,{children:t.name}),t.image&&(0,g.jsx)("div",{className:f.imageContainer,children:(0,g.jsx)(u.Z,{className:f.cardImage,alt:t.name,src:j,style:S})}),(0,g.jsx)(o.Z.Paragraph,{children:t.overview}),t.description&&(0,g.jsx)(o.Z.Paragraph,{children:t.description}),(0,g.jsxs)(l.Z,{children:[(0,g.jsx)(l.Z.Item,{label:"Address",children:t.address}),(0,g.jsx)(l.Z.Item,{label:"Availability",children:t.isAvailable?(0,g.jsx)(h.Z,{color:"green",children:"Available"}):(0,g.jsx)(h.Z,{color:"red",children:"Not Available"})}),t.type&&(0,g.jsx)(l.Z.Item,{label:"Type",children:t.type}),t.fee&&(0,g.jsx)(l.Z.Item,{label:"Fee",children:(0,g.jsx)(h.Z,{children:new Intl.NumberFormat("en-sg",{style:"currency",currency:"SGD"}).format(t.fee)})}),(0,g.jsx)(l.Z.Item,{label:"Owner Name",children:t.ownerName}),(0,g.jsx)(l.Z.Item,{label:"Owner ID",children:t.ownerId}),t.borrowerId&&(0,g.jsx)(l.Z.Item,{label:"Borrower ID",children:t.borrowerId}),t.borrowerName&&(0,g.jsx)(l.Z.Item,{label:"Borrower Name",children:t.borrowerName})]}),t.isAvailable?w&&(w===t.ownerName?(0,g.jsx)(p.ZP,{danger:!0,className:f.button,onClick:P,children:"Remove Sharing"}):(0,g.jsx)(p.ZP,{className:f.button,onClick:_,children:"Borrow"})):w&&w===t.ownerName&&(0,g.jsx)(p.ZP,{className:f.button,onClick:N,children:"Returned"})]}):(0,g.jsx)("div",{children:"Loading..."})}},5798:function(e,r,t){var n=t(4165),a=t(5861),i=t(5671),s=t(3144),c=t(4432),o=function(){function e(){(0,i.Z)(this,e),this.axiosInstance=void 0,this.axiosInstance=c.Z.getInstance().getAxiosInstance()}return(0,s.Z)(e,[{key:"createItem",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/api/Sharing",r);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"getSharingItem",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.get("/api/Sharing/".concat(r));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"deleteSharingItem",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.delete("/api/Sharing/".concat(r));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"borrowItem",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/api/Sharing/".concat(r,"/borrow"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"returnItem",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/api/Sharing/".concat(r,"/return"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()}]),e}(),u=new o;r.Z=u},9228:function(e,r,t){t.d(r,{e:function(){return c}});var n=t(9439),a=t(2791);var i=t.p+"static/media/image-loading.a1ede781901e70477fd231f8fa9f4e60.svg";var s=t.p+"static/media/image-error.ee54a1d3b05048f38768264ffbf6f55b.svg",c=function(e){var r=(0,a.useState)(i),t=(0,n.Z)(r,2),c=t[0],o=t[1],u=(0,a.useState)({opacity:0,transition:"opacity 2s ease-in-out"}),l=(0,n.Z)(u,2),h=l[0],p=l[1];return(0,a.useEffect)((function(){var r=new Image;r.src=e,r.onload=function(){o(e),p({opacity:1,transition:"opacity 0.5s ease-in-out"})},r.onerror=function(){o(s),p({filter:"grayscale(100%)",transition:"filter 0.5s ease-in-out"})}}),[e]),{src:c,style:h}}}}]);
//# sourceMappingURL=207.f3f0f78a.chunk.js.map