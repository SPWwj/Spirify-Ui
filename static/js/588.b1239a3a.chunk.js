"use strict";(self.webpackChunkspirify=self.webpackChunkspirify||[]).push([[588],{3588:function(n,e,t){t.r(e),t.d(e,{default:function(){return y}});var o=t(3433),c=t(9439),r=t(2791),s=t(5671),i=t(3144),a=t(4598),u=t(1871),f=t(3645),v=t(4432),l=function(){function n(){(0,s.Z)(this,n),this.connection=void 0,this.connection=(new a.s).withUrl("".concat(v.Z.BASE_URL,"/chatHub"),{accessTokenFactory:function(){var n=f.Z.getAccessToken();return n||""}}).configureLogging(u.i.Information).build(),this.connection.start().then((function(){return console.log("Connection started")})).catch((function(n){return console.log("Error while starting connection: "+n)}))}return(0,i.Z)(n,[{key:"registerOnServerEvents",value:function(n){this.connection.on("ReceiveMessage",n)}},{key:"removeOnServerEvents",value:function(n){this.connection.off("ReceiveMessage",n)}},{key:"send",value:function(n,e){this.connection.invoke("SendMessage",n,e)}}],[{key:"getInstance",value:function(){return n.instance||(n.instance=new n),n.instance}}]),n}();l.instance=void 0;var h=t(8792),g=t(9389),d=t(9004),m="ChatComponent_chatComponent__8Je4v",C="ChatComponent_messageList__oUSKb",p="ChatComponent_chatInput__SC6nX",k="ChatComponent_sendMessageButton__g3g3a",_=t(184),y=function(){var n=(0,r.useState)(""),e=(0,c.Z)(n,2),t=e[0],s=e[1],i=(0,r.useState)([]),a=(0,c.Z)(i,2),u=a[0],f=a[1],v=(0,r.useRef)(l.getInstance());(0,r.useEffect)((function(){var n=v.current,e=function(n,e){f((function(t){return[].concat((0,o.Z)(t),["".concat(n,": ").concat(e)])})),console.log("Received message: ",e)};return n.registerOnServerEvents(e),function(){n.removeOnServerEvents(e)}}),[]);var y=function(){""!==t.trim()&&(v.current.send("user1",t),s(""))};return(0,_.jsxs)("div",{className:m,children:[(0,_.jsx)(h.ZP,{className:C,bordered:!0,dataSource:u,renderItem:function(n){return(0,_.jsx)(h.ZP.Item,{children:n})}}),(0,_.jsx)(g.Z,{className:p,type:"text",value:t,onChange:function(n){return s(n.target.value)},onKeyDown:function(n){"Enter"===n.key&&y()}}),(0,_.jsx)(d.ZP,{className:k,type:"primary",onClick:y,children:"Send Message"})]})}}}]);
//# sourceMappingURL=588.b1239a3a.chunk.js.map